<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Reading dlf files • daisyrVis</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Reading dlf files">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">daisyrVis</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.2.0000</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/compare-simulated-and-measured-data.html">Compare simulated and measured data</a></li>
    <li><a class="dropdown-item" href="../articles/daisy-01-reading-dlf-files.html">Reading dlf files</a></li>
    <li><a class="dropdown-item" href="../articles/daisy-02-plotting-dlfs.html">Plotting dlfs</a></li>
    <li><a class="dropdown-item" href="../articles/mass-balance.html">Mass balance</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>Reading dlf files</h1>
            
      

      <div class="d-none name"><code>daisy-01-reading-dlf-files.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://daisy-model.github.io/daisyrVis/">daisyrVis</a></span><span class="op">)</span></span></code></pre></div>
<p>There are are two functions for reading dlf files
<code>read_dlf</code> and <code>read_dlf_dir</code>.
<code>read_dlf</code> reads a single dlf file, <code>read_dlf_dir</code>
searches a directory tree and reads all dlf files it finds.
<code>read_dlf_dir</code> is particularly useful for reading outputs the
spawn program in <code>daisy</code>.</p>
<div class="section level2">
<h2 id="reading-a-single-dlf-file">Reading a single dlf file<a class="anchor" aria-label="anchor" href="#reading-a-single-dlf-file"></a>
</h2>
<p>We start by reading a single dlf file and inspect the contents. We
use the Soil chemical log that is bundled with <code>daisyrVis</code>
and read it with <code>read_dlf</code>.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package<span class="op">=</span><span class="st">"daisyrVis"</span><span class="op">)</span></span>
<span><span class="va">path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">data_dir</span>, <span class="st">"hourly/P2D-Daily-Soil_Chemical_110cm.dlf"</span><span class="op">)</span></span>
<span><span class="va">dlf</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_dlf.html">read_dlf</a></span><span class="op">(</span><span class="va">path</span><span class="op">)</span></span></code></pre></div>
<p><code>read_dlf</code> returns an S4 object of class <code>Dlf</code>.
The data in the dlf file is stored in three <em>slots</em> in the
<code>Dlf</code> object, <code>header</code>, <code>units</code>,
<code>data</code></p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu">slotNames</span><span class="op">(</span><span class="va">dlf</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "header" "units"  "data"</span></span></code></pre></div>
<p>The <code>header</code> slot is a list of the metadata that is stored
before the actual data in the dlf file. The <code>units</code> slot is a
<code>data.frame</code> with unit information for each data column. The
<code>data</code> slot is a <code>data.frame</code> containing the data.
A slot is accessed with the <code>@</code> operator</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dlf</span><span class="op">@</span><span class="va">header</span></span>
<span><span class="co">#&gt; $info</span></span>
<span><span class="co">#&gt; [1] "dlf-0.0 -- Soil chemical (defined in 'log-std.dai')."</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $VERSION</span></span>
<span><span class="co">#&gt; [1] "6.41"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $LOGFILE</span></span>
<span><span class="co">#&gt; [1] "P2D-Daily-Soil Chemical_110cm.dlf"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $RUN</span></span>
<span><span class="co">#&gt; [1] "Thu Aug 31 10"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $COLUMN</span></span>
<span><span class="co">#&gt; [1] "*"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $CHEMICAL</span></span>
<span><span class="co">#&gt; [1] "P2d"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $INTERVAL</span></span>
<span><span class="co">#&gt; [1] "box [-110; none]"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $LOG</span></span>
<span><span class="co">#&gt; [1] "Content, transport and transformation of chemicals in the soil."</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $SIMFILE</span></span>
<span><span class="co">#&gt; [1] "Sim2-1d-Maize-P2p-d.dai"</span></span></code></pre></div>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dlf</span><span class="op">@</span><span class="va">units</span></span>
<span><span class="co">#&gt;   year month mday hour In_Matrix In_Biopores Leak_Matrix Leak_Biopores</span></span>
<span><span class="co">#&gt; 1                           g/ha        g/ha        g/ha          g/ha</span></span>
<span><span class="co">#&gt;   Biopores.to.matrix Matrix.to.biopores Tillage Drain_Soil Drain_Biopores</span></span>
<span><span class="co">#&gt; 1               g/ha               g/ha    g/ha       g/ha           g/ha</span></span>
<span><span class="co">#&gt;   Drain_Biopores_Indirect External Uptake Decompose Transform Content Biopores</span></span>
<span><span class="co">#&gt; 1                    g/ha     g/ha   g/ha      g/ha      g/ha    g/ha     g/ha</span></span>
<span><span class="co">#&gt;   Error</span></span>
<span><span class="co">#&gt; 1  g/ha</span></span></code></pre></div>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dlf</span><span class="op">@</span><span class="va">data</span><span class="op">)</span></span>
<span><span class="co">#&gt;   year month mday hour In_Matrix In_Biopores  Leak_Matrix Leak_Biopores</span></span>
<span><span class="co">#&gt; 1 1995     1    1    0         0           0 -0.000208120             0</span></span>
<span><span class="co">#&gt; 2 1995     1    1    1         0           0 -0.000207217             0</span></span>
<span><span class="co">#&gt; 3 1995     1    1    2         0           0 -0.000206316             0</span></span>
<span><span class="co">#&gt; 4 1995     1    1    3         0           0 -0.000205415             0</span></span>
<span><span class="co">#&gt; 5 1995     1    1    4         0           0 -0.000204516             0</span></span>
<span><span class="co">#&gt; 6 1995     1    1    5         0           0 -0.000203618             0</span></span>
<span><span class="co">#&gt;   Biopores.to.matrix Matrix.to.biopores Tillage Drain_Soil Drain_Biopores</span></span>
<span><span class="co">#&gt; 1                  0                  0       0          0              0</span></span>
<span><span class="co">#&gt; 2                  0                  0       0          0              0</span></span>
<span><span class="co">#&gt; 3                  0                  0       0          0              0</span></span>
<span><span class="co">#&gt; 4                  0                  0       0          0              0</span></span>
<span><span class="co">#&gt; 5                  0                  0       0          0              0</span></span>
<span><span class="co">#&gt; 6                  0                  0       0          0              0</span></span>
<span><span class="co">#&gt;   Drain_Biopores_Indirect External Uptake  Decompose  Transform Content</span></span>
<span><span class="co">#&gt; 1                       0        0      0 0.00301612 0.00227715 60.5101</span></span>
<span><span class="co">#&gt; 2                       0        0      0 0.00300712 0.00225974 60.5095</span></span>
<span><span class="co">#&gt; 3                       0        0      0 0.00299438 0.00223681 60.5090</span></span>
<span><span class="co">#&gt; 4                       0        0      0 0.00297959 0.00221215 60.5084</span></span>
<span><span class="co">#&gt; 5                       0        0      0 0.00296299 0.00218613 60.5078</span></span>
<span><span class="co">#&gt; 6                       0        0      0 0.00294491 0.00215918 60.5073</span></span>
<span><span class="co">#&gt;      Biopores Error</span></span>
<span><span class="co">#&gt; 1 9.80239e-19     0</span></span>
<span><span class="co">#&gt; 2 9.80239e-19     0</span></span>
<span><span class="co">#&gt; 3 9.80239e-19     0</span></span>
<span><span class="co">#&gt; 4 9.80239e-19     0</span></span>
<span><span class="co">#&gt; 5 9.80239e-19     0</span></span>
<span><span class="co">#&gt; 6 9.80239e-19     0</span></span></code></pre></div>
<p>We can also directly access and assign columns of the
<code>data</code> slot with the <code>$</code> and <code>[[</code>
operators</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dlf</span><span class="op">$</span><span class="va">year</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 1995 1995 1995 1995 1995 1995</span></span>
<span><span class="va">dlf</span><span class="op">$</span><span class="va">year</span> <span class="op">&lt;-</span> <span class="va">dlf</span><span class="op">$</span><span class="va">year</span> <span class="op">+</span> <span class="fl">2</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="va">dlf</span><span class="op">[[</span><span class="st">"year"</span><span class="op">]</span><span class="op">]</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] 1997 1997 1997 1997 1997 1997</span></span>
<span><span class="va">dlf</span><span class="op">[[</span><span class="fl">1</span>, <span class="st">"year"</span><span class="op">]</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="va">dlf</span><span class="op">[[</span><span class="fl">1</span>, <span class="st">"year"</span><span class="op">]</span><span class="op">]</span> <span class="op">+</span> <span class="fl">10</span></span>
<span><span class="va">dlf</span><span class="op">[[</span><span class="fl">1</span>, <span class="st">"year"</span><span class="op">]</span><span class="op">]</span></span>
<span><span class="co">#&gt; [1] 2007</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="reading-a-directory-with-dlf-files">Reading a directory with dlf files<a class="anchor" aria-label="anchor" href="#reading-a-directory-with-dlf-files"></a>
</h2>
<p>We use the tracer and field nitrogen logs that are bundled with
<code>daisyrVis</code> and read them with <code>read_dlf_dir</code></p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package<span class="op">=</span><span class="st">"daisyrVis"</span><span class="op">)</span></span>
<span><span class="va">path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">data_dir</span>, <span class="st">"annual"</span><span class="op">)</span></span></code></pre></div>
<p>Notice that the path is to a directory, instead of to a file as we
did when reading a single dlf file.</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dlfs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_dlf_dir.html">read_dlf_dir</a></span><span class="op">(</span><span class="va">path</span><span class="op">)</span></span></code></pre></div>
<p><code>read_dlf_dir</code> returns a list of <code>Dlf</code>
objects</p>
<div class="sourceCode" id="cb10"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">dlfs</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Annual-FN/HourlyP-Annual-FN-2-2b"        </span></span>
<span><span class="co">#&gt; [2] "Annual-FN/HourlyP-Annual-FN-2-3b"        </span></span>
<span><span class="co">#&gt; [3] "Annual-FN/HourlyP-Annual-FN-2-4b"        </span></span>
<span><span class="co">#&gt; [4] "Annual-FN/HourlyP-Annual-FN-2-5b"        </span></span>
<span><span class="co">#&gt; [5] "Annual-Tracer/HourlyP-Annual-Tracer-2-2b"</span></span>
<span><span class="co">#&gt; [6] "Annual-Tracer/HourlyP-Annual-Tracer-2-3b"</span></span>
<span><span class="co">#&gt; [7] "Annual-Tracer/HourlyP-Annual-Tracer-2-4b"</span></span>
<span><span class="co">#&gt; [8] "Annual-Tracer/HourlyP-Annual-Tracer-2-5b"</span></span></code></pre></div>
<p>To get a specific dlf we just index the list with the name</p>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">name</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">dlfs</span><span class="op">)</span><span class="op">[</span><span class="fl">1</span><span class="op">]</span></span>
<span><span class="va">name</span></span>
<span><span class="co">#&gt; [1] "Annual-FN/HourlyP-Annual-FN-2-2b"</span></span>
<span><span class="va">dlfs</span><span class="op">[[</span><span class="va">name</span><span class="op">]</span><span class="op">]</span><span class="op">@</span><span class="va">header</span></span>
<span><span class="co">#&gt; $info</span></span>
<span><span class="co">#&gt; [1] "dlf-0.0 -- Field nitrogen (defined in 'log-std.dai')."</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $VERSION</span></span>
<span><span class="co">#&gt; [1] "6.41"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $LOGFILE</span></span>
<span><span class="co">#&gt; [1] "Annual-FN.dlf"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $RUN</span></span>
<span><span class="co">#&gt; [1] "Mon Aug 28 16"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $COLUMN</span></span>
<span><span class="co">#&gt; [1] "*"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $INTERVAL</span></span>
<span><span class="co">#&gt; [1] "box none"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $LOG</span></span>
<span><span class="co">#&gt; [1] "Nitrogen input, output, transformation and content for the system.\n\nThe intended use of this log is large scale nitrogen balance, for\nexample reservoir management. It provide information about how\nmuch nitrogen is in the field (down to a specified depth), where\nit is located in the field (surface, soil matrix or in biopores),\nwhat form is has (crop, soil organic matter, or mineral) as well\nas the sources, sinks and amounts of nitrogen entering or leaving\nthe system, and transformation between the four forms.  It does\nnot provide information about internal translocation of nitrogen\nbetween surface, soil matrix and biopores, use see the 'Soil\nnitrogen' log instead for that.\n\nFor the balances of this log to work, you must include the entire\nroot zone"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $SIMFILE</span></span>
<span><span class="co">#&gt; [1] "Runfile2b.dai"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $SIM</span></span>
<span><span class="co">#&gt; [1] "Arable farm rotation; Soil"</span></span></code></pre></div>
<p>The names are the file paths, which can be a bit unwieldly. We can
either manually change the names or use the convenience functions
<code>drop_dir_from_names</code> and
<code>strip_common_prefix_from_names</code></p>
<div class="sourceCode" id="cb12"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dlfs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/drop_dir_from_names.html">drop_dir_from_names</a></span><span class="op">(</span><span class="va">dlfs</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">dlfs</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "HourlyP-Annual-FN-2-2b"     "HourlyP-Annual-FN-2-3b"    </span></span>
<span><span class="co">#&gt; [3] "HourlyP-Annual-FN-2-4b"     "HourlyP-Annual-FN-2-5b"    </span></span>
<span><span class="co">#&gt; [5] "HourlyP-Annual-Tracer-2-2b" "HourlyP-Annual-Tracer-2-3b"</span></span>
<span><span class="co">#&gt; [7] "HourlyP-Annual-Tracer-2-4b" "HourlyP-Annual-Tracer-2-5b"</span></span></code></pre></div>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">dlfs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/strip_common_prefix_from_names.html">strip_common_prefix_from_names</a></span><span class="op">(</span><span class="va">dlfs</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">dlfs</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "FN-2-2b"     "FN-2-3b"     "FN-2-4b"     "FN-2-5b"     "Tracer-2-2b"</span></span>
<span><span class="co">#&gt; [6] "Tracer-2-3b" "Tracer-2-4b" "Tracer-2-5b"</span></span></code></pre></div>
<div class="sourceCode" id="cb14"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">dlfs</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"A"</span>, <span class="st">"B"</span>, <span class="st">"C"</span>, <span class="st">"D"</span>, <span class="st">"E"</span>, <span class="st">"F"</span>, <span class="st">"G"</span>, <span class="st">"H"</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">dlfs</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "A" "B" "C" "D" "E" "F" "G" "H"</span></span>
<span><span class="va">dlfs</span><span class="op">[[</span><span class="st">"A"</span><span class="op">]</span><span class="op">]</span><span class="op">@</span><span class="va">header</span></span>
<span><span class="co">#&gt; $info</span></span>
<span><span class="co">#&gt; [1] "dlf-0.0 -- Field nitrogen (defined in 'log-std.dai')."</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $VERSION</span></span>
<span><span class="co">#&gt; [1] "6.41"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $LOGFILE</span></span>
<span><span class="co">#&gt; [1] "Annual-FN.dlf"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $RUN</span></span>
<span><span class="co">#&gt; [1] "Mon Aug 28 16"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $COLUMN</span></span>
<span><span class="co">#&gt; [1] "*"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $INTERVAL</span></span>
<span><span class="co">#&gt; [1] "box none"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $LOG</span></span>
<span><span class="co">#&gt; [1] "Nitrogen input, output, transformation and content for the system.\n\nThe intended use of this log is large scale nitrogen balance, for\nexample reservoir management. It provide information about how\nmuch nitrogen is in the field (down to a specified depth), where\nit is located in the field (surface, soil matrix or in biopores),\nwhat form is has (crop, soil organic matter, or mineral) as well\nas the sources, sinks and amounts of nitrogen entering or leaving\nthe system, and transformation between the four forms.  It does\nnot provide information about internal translocation of nitrogen\nbetween surface, soil matrix and biopores, use see the 'Soil\nnitrogen' log instead for that.\n\nFor the balances of this log to work, you must include the entire\nroot zone"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $SIMFILE</span></span>
<span><span class="co">#&gt; [1] "Runfile2b.dai"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $SIM</span></span>
<span><span class="co">#&gt; [1] "Arable farm rotation; Soil"</span></span></code></pre></div>
<div class="section level3">
<h3 id="controlling-which-files-are-included">Controlling which files are included<a class="anchor" aria-label="anchor" href="#controlling-which-files-are-included"></a>
</h3>
<p><code>read_dlf_dir</code> takes an optional pattern parameter that
can be used to control which files are included. By default all files
with the suffix <code>.dlf</code> are included. If we only want to read
files ending with <code>2b.dlf</code>, we can do</p>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_dir</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/system.file.html" class="external-link">system.file</a></span><span class="op">(</span><span class="st">"extdata"</span>, package<span class="op">=</span><span class="st">"daisyrVis"</span><span class="op">)</span></span>
<span><span class="va">path</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/file.path.html" class="external-link">file.path</a></span><span class="op">(</span><span class="va">data_dir</span>, <span class="st">"annual"</span><span class="op">)</span></span>
<span><span class="va">pattern</span> <span class="op">&lt;-</span> <span class="st">".*2b\\.dlf"</span></span>
<span><span class="va">dlfs</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/read_dlf_dir.html">read_dlf_dir</a></span><span class="op">(</span><span class="va">path</span>, <span class="va">pattern</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">dlfs</span><span class="op">)</span></span>
<span><span class="co">#&gt; [1] "Annual-FN/HourlyP-Annual-FN-2-2b"        </span></span>
<span><span class="co">#&gt; [2] "Annual-Tracer/HourlyP-Annual-Tracer-2-2b"</span></span></code></pre></div>
<p><code>pattern</code> is a regular expression. You should around with
it and see if you can find a shorter pattern that results in the same
files being read.</p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Silas Ørting.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.1.</p>
</div>

    </footer>
</div>





  </body>
</html>
